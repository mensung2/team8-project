<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
  <!-- 구글 noto sans 폰트 -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css" rel="stylesheet">
  <!-- Reset CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <!-- 부트스트랩 CDN -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!-- jQuery -->

  <title>자기소개 페이지</title>
  <style>
    *{
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body{
      font-size: 16px;
      font-family: 'Noto Sans KR', sans-serif;
      color: #000;
      background-color: #fff;
    }
    li{
      list-style: none;
    }
    a{
      text-decoration: none;
      color: inherit;
    }
    img{
      vertical-align: top;
    }
    /* //common */




    #wrap{
      width: 100%;
      height: 1080px;
      margin: 0 auto;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      background: url(../team8-project/image/index-background.png);
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
    }
    #wrap .main{
      width: 1350px;
      height: 600px;
      margin-top: 100px;
    }
    #wrap .introduce{
      width: 100%;
      height: 600px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 50px;
    }
    #wrap .introduce .photo{
      width: 500px;
      height: 600px;
      grid-column: 1/2;
      grid-row: 1/3;
      background-image: url(../team8-project/image/yis_photo.png);
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
    }
    #wrap .introduce .contents{
      width: 800px;
      height: 500px;
      grid-column: 2/3;
      grid-row: 1/2;
      display: flex;
      flex-wrap: wrap;
      flex-direction: column;
      justify-content: space-between;
    }
    #wrap .introduce .contents .information{
      width: 100%;
      height: 150px;
      background-color: #e7efff;
      display: flex;
    }
    #wrap .introduce .contents .information .my_intro{
      width: 80%;
      padding: 15px;
    }
    #wrap .introduce .contents .information .my_link{
      width: 20%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: space-around;
    }
    #wrap .introduce .contents .information .my_link ul{
      display: flex;
      padding: 10px;
      margin-top: 80px;
    }
    #wrap .introduce .contents .information .my_link li{
      display: flex;
      padding: 10px;
    }
    #wrap .introduce .contents .information h1{
      font-size: 30px;
    }
    #wrap .introduce .contents .information p{
      padding-left: 10px;
    }
    #wrap .introduce .contents .notepad_wrap{
      width: 100%;
      height: 300px;
    }
    #wrap .introduce .contents .notepad_wrap .notepad_writing{
      width: 100%;
      height: 80px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .form-floating.mb-3{
      margin-top: 18px;
    }
    .notepad_btn{
      display: flex;
      padding-right: 10px;
    }
    #postingbtn{ 
      margin-right: 10px;
    }
    #floatingInput{
      width: 600px;
    }
    .btn.btn-success{
      height: 60px;
    }
    .notepad_show .col{
      height: 220px;
      padding: 10px;
    }
    #wrap .introduce .hashtag{
      width: 800px;
      height: 50px;
      grid-column: 2/3;
      grid-row: 2/3;
      background-color: #e7efff;
      display: flex;
    }
    #wrap .introduce .hashtag p{
      padding: 13px;
      font-weight: 500;
    }
    /* //main */




    #wrap .footer{
      margin-bottom: 150px;
      width: 1350px;
      height: 100px;
      display: flex;
      justify-content: center;
    }
    #wrap .footer .comment{
      width: 1000px;
      height: 100%;
      background-color: #e7efff;
    }
    .container.py-5{
      padding-top: 0rem !important;
    }
    #commentForm{
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    #commentForm button{
      height: 40px;
      margin-top: 30px;
    }
    .mt-3>div{
      padding-top: 10px;
    }
    #wrap .footer .comment #commentInput{
      width: 600px;
    }
    #wrap .footer .comment #passwordInput{
      width: 180px;
    }
    /* //footer */
  </style>
</head>

<body>
  <div id="wrap">
    <div class="main">
      <div class="introduce">
        <div class="photo"></div>
        <div class="contents">
          <div class="information">
            <div class="my_intro">
              <h1>유인수</h1>
            <p>
               자격증 공부중 코딩에 흥미를 느껴 내일배움캠프에 참가하게 되었고 , <br>
               여기서의 배움을 바탕으로 개발자로서 새로운 전환점을 맞이하고 싶습니다. <br>
               다양한 프로젝트와 도전을 통해 같은 꿈을 가진 조원분들과 함께 나아가겠습니다.
            </p>
            </div>
            <div class="my_link">
              <ul>
                <li><a href="https://velog.io/@dtdt203"><img src="../team8-project/image/vellog-img-50x50.jpg" alt="블로그_바로가기"></a></li>
                <li><a href="https://github.com/YISYISYISYIS"><img src="../team8-project/image/github-img-50x50.jpg" alt="깃허브_바로가기"></a></li>
              </ul>
            </div>
          </div>
          <div class="notepad_wrap">
            <div class="notepad_writing">
              <div class="form-floating mb-3">
                <input type="email" class="form-control" id="floatingInput" placeholder="메모장">
                <label for="floatingInput">메모3개까지 가능. 그이상은 전체삭제하고 다시 써주세요.</label>
              </div>
              <!-- //form-floating mb-3 -->
              <div class="notepad_btn">
                <button id="postingbtn" type="button" class="btn btn-success">기록하기</button>
                <button id="deletebtn" type="button" class="btn btn-danger">삭제하기</button>
              </div>
              <!-- //notepad_btn -->
            </div>
            <!-- //notepad_writing -->
            <div class="notepad_show">
              <div id="card" class="row row-cols-1 row-cols-md-3 g-1">
               
              </div>
            </div>
            <!-- //notepad_show -->
          </div>
          <!-- //notepad -->
        </div>
        <div class="hashtag">
          <a href="#"><p>#개발자 꿈나무</p></a>
          <a href="#"><p>#성실함</p></a>
          <a href="#"><p>#약속</p></a>
          <a href="#"><p>#꾸준함</p></a>
          <a href="#"><p>#HTML</p></a>
          <a href="#"><p>#CSS</p></a>
          <a href="#"><p>#JavaScript</p></a>
          <a href="#"><p>#React</p></a>
        </div>
      </div>
    </div>
    <!-- //main -->
    <div class="footer">
      <div class="comment">
        <div class="container py-5">
          <form id="commentForm">
            <div class="mb-3">
              <label for="commentInput" class="form-label">챗 GPT버전 작동중지</label>
              <input type="text" class="form-control" id="commentInput" placeholder="댓글을 입력하세요.">
            </div>
            <div class="mb-3">
              <label for="passwordInput" class="form-label">비밀번호</label>
              <input type="password" class="form-control" id="passwordInput" placeholder="비밀번호를 입력하세요.">
            </div>
            <button type="submit" class="btn btn-primary">댓글 달기</button>
          </form>
          <div id="commentsList" class="mt-3"></div>
        </div>
        <!-- //container py-5 -->
      </div>
      <!-- //comment -->
    </div>
    <!-- footer -->
  </div>
  <!-- //wrap -->


  <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.2/firebase-firestore.js"></script>
  <!-- 파이어베이스 CDN -->
  <script type="module">
    // Firebase SDK 라이브러리 가져오기
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
  import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
  import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
  import { writeBatch } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // Firebase 구성 정보 설정
    const firebaseConfig = {
      apiKey: "AIzaSyALCvTS0w8PDnupSIDwp-jlZmYiVk-0IkU",
          authDomain: "sparta-3c679.firebaseapp.com",
          projectId: "sparta-3c679",
          storageBucket: "sparta-3c679.appspot.com",
          messagingSenderId: "513535082637",
          appId: "1:513535082637:web:19049a3cba86baf339e2c4",
          measurementId: "G-BWQPHLCXVX" 
    };


    // Firebase 인스턴스 초기화
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

        $("#postingbtn").click(async function () {
          const docsCount = docs.size; // 현재 저장된 메모의 개수를 가져옴

          if(docsCount >= 3) {
            alert("더 이상 메모를 추가할 수 없습니다.");
            return; // 함수 실행을 여기서 종료.
          }

          let note = $("#floatingInput").val();

          let doc = {
            "note" :note
          };
          await addDoc(collection(db, "notepad"), doc);
          alert("저장 완료")
          window.location.reload();
        })

        let docs = await getDocs(collection(db, "notepad"));
            docs.forEach((doc) => {
            let row = doc.data();

            let note = row["note"]    
            let temp_html =`<div class="col">
                  <div class="card h-100">
                    <div class="card-body">
                      <p class="card-text">${note}</p>
                    </div>
                  </div>
                </div>`;
                $("#card").append(temp_html);
            }); 

        $("#deletebtn").click(async function() {
          if(confirm("정말로 모든 노트를 삭제하시겠습니까?")) {
            const docs = await getDocs(collection(db, "notepad"));
            const batch = writeBatch(db); 
            docs.forEach((doc) => {
              batch.delete(doc.ref); 
            });
            await batch.commit(); 
            alert("삭제완료.");
            window.location.reload(); 
          }
        });
  </script>










<!--stop using -->
  <script>
    //내 키값
    // const firebaseConfig = {
    //   apiKey: "AIzaSyALCvTS0w8PDnupSIDwp-jlZmYiVk-0IkU",
    //   authDomain: "sparta-3c679.firebaseapp.com",
    //   projectId: "sparta-3c679",
    //   storageBucket: "sparta-3c679.appspot.com",
    //   messagingSenderId: "513535082637",
    //   appId: "1:513535082637:web:19049a3cba86baf339e2c4",
    //   measurementId: "G-BWQPHLCXVX"
    // };
    // firebase.initializeApp(firebaseConfig);
    // const db = firebase.firestore();

    //GPT 작성
    const commentForm = document.getElementById('commentForm');
    const commentInput = document.getElementById('commentInput');
    const passwordInput = document.getElementById('passwordInput');
    const commentsList = document.getElementById('commentsList');

    // 댓글 제출
    commentForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const commentText = commentInput.value.trim();
      const password = passwordInput.value.trim();

      // 비밀번호 입력 확인
      if (password === '') {
        alert('비밀번호를 입력해주세요.');
        return; // 비밀번호가 입력되지 않았다면 함수를 여기서 종료
      }


      // 파이어베이스에 댓글과 비밀번호 저장
      db.collection('comments').add({
        text: commentText,
        password: password, // 비밀번호 저장
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        commentInput.value = '';
        passwordInput.value = '';
        loadComments(); // 댓글 목록을 다시 불러옴
      });
    });

    // // 댓글 목록 불러오기
    // function loadComments() {
    //   commentsList.innerHTML = ''; // 목록 초기화
    //   db.collection('comments').orderBy('createdAt', 'desc').get().then((querySnapshot) => {
    //     // desc를 asc로 변경시 댓글이 오름차순정렬됨
    //     querySnapshot.forEach((doc) => {
    //       const comment = doc.data();
    //       const commentElement = document.createElement('div');
    //       commentElement.textContent = comment.text + ' ';

    //       // 삭제 버튼 추가
    //       const deleteButton = document.createElement('button');
    //       deleteButton.textContent = '삭제';
    //       deleteButton.className = 'btn btn-danger btn-sm';
    //       deleteButton.onclick = function () {
    //         deleteComment(doc.id);
    //       };
    //       commentElement.appendChild(deleteButton);

    //       commentsList.appendChild(commentElement);
    //     });
    //   });
    // }

    // 댓글 삭제
    function deleteComment(id) {
      const userPassword = prompt("댓글을 삭제하기 위한 비밀번호를 입력해주세요.");

      db.collection('comments').doc(id).get().then((doc) => {
        const comment = doc.data();
        if (comment.password === userPassword) {
          db.collection('comments').doc(id).delete().then(() => {
            loadComments(); // 삭제 후 댓글 목록을 다시 불러옴
          });
        } else {
          alert("비밀번호가 일치하지 않습니다.");
        }
      });
    }

    // 초기 댓글 목록 불러오기
    // loadComments();
  </script>
</body>

</html>